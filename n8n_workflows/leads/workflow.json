{
  "name": "Leads - Formulaire d'inscription",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "inscription",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-node",
      "name": "Webhook - RÃ©ception formulaire",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [240, 300],
      "webhookId": "inscription"
    },
    {
      "parameters": {
        "jsCode": "// Validation des donnÃ©es reÃ§ues\nconst data = $input.all()[0].json;\n\nconst errors = [];\n\n// Validation du nom\nif (!data.nom || typeof data.nom !== 'string' || !data.nom.trim()) {\n  errors.push('Le nom est requis');\n}\n\n// Validation du prÃ©nom\nif (!data.prenom || typeof data.prenom !== 'string' || !data.prenom.trim()) {\n  errors.push('Le prÃ©nom est requis');\n}\n\n// Validation du tÃ©lÃ©phone\nif (!data.telephone || typeof data.telephone !== 'string' || !data.telephone.trim()) {\n  errors.push('Le tÃ©lÃ©phone est requis');\n} else if (!/^[0-9+\\s\\-()]+$/.test(data.telephone)) {\n  errors.push('Format de tÃ©lÃ©phone invalide');\n}\n\n// Validation de l'email\nif (!data.email || typeof data.email !== 'string' || !data.email.trim()) {\n  errors.push('L\\'email est requis');\n} else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(data.email)) {\n  errors.push('Format d\\'email invalide');\n}\n\n// Si des erreurs sont dÃ©tectÃ©es, on les lance\nif (errors.length > 0) {\n  throw new Error(`Validation Ã©chouÃ©e: ${errors.join(', ')}`);\n}\n\n// Retourner les donnÃ©es validÃ©es avec un flag\nreturn {\n  json: {\n    ...data,\n    validated: true,\n    dateReception: new Date().toISOString(),\n    dateReceptionFormatted: new Date().toLocaleString('fr-FR', {\n      dateStyle: 'full',\n      timeStyle: 'short'\n    })\n  }\n};"
      },
      "id": "validation-node",
      "name": "Code - Validation",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 300]
    },
    {
      "parameters": {
        "fromEmail": "={{ $env.EMAIL_FROM || 'noreply@talosprimes.com' }}",
        "toEmail": "={{ $json.email }}",
        "subject": "Demande d'inscription TalosPrimes - Confirmation",
        "emailFormat": "html",
        "options": {
          "allowUnauthorizedCerts": true
        },
        "text": "<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Confirmation d'inscription - TalosPrimes</title>\n  <style>\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;\n      line-height: 1.6;\n      color: #333;\n      margin: 0;\n      padding: 0;\n      background-color: #f4f4f4;\n    }\n    .container {\n      max-width: 600px;\n      margin: 20px auto;\n      background-color: #ffffff;\n      border-radius: 8px;\n      overflow: hidden;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    }\n    .header {\n      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);\n      color: white;\n      padding: 30px 20px;\n      text-align: center;\n    }\n    .header h1 {\n      margin: 0;\n      font-size: 28px;\n      font-weight: 600;\n    }\n    .content {\n      padding: 30px 20px;\n      background-color: #ffffff;\n    }\n    .greeting {\n      font-size: 18px;\n      font-weight: 600;\n      color: #1f2937;\n      margin-bottom: 20px;\n    }\n    .info-box {\n      background-color: #f9fafb;\n      border-left: 4px solid #4f46e5;\n      padding: 15px;\n      margin: 20px 0;\n      border-radius: 4px;\n    }\n    .info-box ul {\n      margin: 10px 0;\n      padding-left: 20px;\n    }\n    .info-box li {\n      margin: 5px 0;\n      color: #374151;\n    }\n    .highlight {\n      background-color: #fef3c7;\n      padding: 15px;\n      border-radius: 6px;\n      margin: 20px 0;\n      border-left: 4px solid #f59e0b;\n    }\n    .highlight strong {\n      color: #92400e;\n    }\n    .footer {\n      background-color: #f9fafb;\n      padding: 20px;\n      text-align: center;\n      color: #6b7280;\n      font-size: 12px;\n      border-top: 1px solid #e5e7eb;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>TalosPrimes</h1>\n      <p style=\"margin: 10px 0 0 0; opacity: 0.9;\">Gestion d'entreprise automatisÃ©e</p>\n    </div>\n    \n    <div class=\"content\">\n      <div class=\"greeting\">\n        Bonjour {{ $json.prenom }} {{ $json.nom }},\n      </div>\n      \n      <p style=\"color: #374151; margin: 15px 0;\">\n        Nous avons bien reÃ§u votre demande d'inscription sur <strong>TalosPrimes</strong>.\n      </p>\n      \n      <div class=\"info-box\">\n        <p style=\"margin-top: 0; font-weight: 600; color: #1f2937;\">Vos informations :</p>\n        <ul>\n          <li><strong>Nom :</strong> {{ $json.nom }}</li>\n          <li><strong>PrÃ©nom :</strong> {{ $json.prenom }}</li>\n          <li><strong>Email :</strong> {{ $json.email }}</li>\n          <li><strong>TÃ©lÃ©phone :</strong> {{ $json.telephone }}</li>\n        </ul>\n      </div>\n      \n      <div class=\"highlight\">\n        <p style=\"margin: 0;\">\n          Notre Ã©quipe va examiner votre demande et vous recontactera dans un dÃ©lai de <strong>24 Ã  48 heures</strong> pour discuter de vos besoins et vous prÃ©senter nos solutions.\n        </p>\n      </div>\n      \n      <p style=\"color: #374151; margin: 20px 0;\">\n        En attendant, n'hÃ©sitez pas Ã  consulter notre site web pour en savoir plus sur nos services et dÃ©couvrir comment TalosPrimes peut aider votre entreprise Ã  automatiser ses processus mÃ©tier.\n      </p>\n      \n      <p style=\"color: #374151; margin: 30px 0 10px 0;\">\n        Cordialement,<br>\n        <strong>L'Ã©quipe TalosPrimes</strong>\n      </p>\n    </div>\n    \n    <div class=\"footer\">\n      <p><strong>TalosPrimes</strong> - Plateforme SaaS de gestion d'entreprise</p>\n      <p>Cet email a Ã©tÃ© envoyÃ© automatiquement, merci de ne pas y rÃ©pondre directement.</p>\n      <p style=\"margin-top: 15px;\">\n        <a href=\"https://talosprimes.com\" style=\"color: #4f46e5; text-decoration: none;\">www.talosprimes.com</a>\n      </p>\n    </div>\n  </div>\n</body>\n</html>"
      },
      "id": "email-confirmation",
      "name": "Email - Confirmation utilisateur",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2,
      "position": [680, 200],
      "credentials": {
        "smtp": {
          "id": "smtp-credential-id",
          "name": "SMTP TalosPrimes"
        }
      }
    },
    {
      "parameters": {
        "fromEmail": "={{ $env.EMAIL_FROM || 'noreply@talosprimes.com' }}",
        "toEmail": "={{ $env.EMAIL_TO_EQUIPE || 'contact@talosprimes.com' }}",
        "subject": "Nouvelle demande d'inscription - {{ $json.prenom }} {{ $json.nom }}",
        "emailFormat": "text",
        "text": "Nouvelle demande d'inscription reÃ§ue\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ“‹ Informations du lead :\n\n  Nom : {{ $json.nom }}\n  PrÃ©nom : {{ $json.prenom }}\n  Email : {{ $json.email }}\n  TÃ©lÃ©phone : {{ $json.telephone }}\n\nâ° Date de rÃ©ception : {{ $json.dateReceptionFormatted }}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ“ Actions Ã  effectuer :\n\n  â€¢ VÃ©rifier l'email du lead\n  â€¢ Contacter le lead dans les 24-48h\n  â€¢ Ajouter le lead dans le CRM (si applicable)\n  â€¢ PrÃ©parer une prÃ©sentation personnalisÃ©e\n\nğŸ”— AccÃ©der au dashboard :\n  https://talosprimes.com/dashboard\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTalosPrimes - SystÃ¨me automatisÃ©\nCet email a Ã©tÃ© gÃ©nÃ©rÃ© automatiquement."
      },
      "id": "email-notification",
      "name": "Email - Notification Ã©quipe",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2,
      "position": [680, 400],
      "credentials": {
        "smtp": {
          "id": "smtp-credential-id",
          "name": "SMTP TalosPrimes"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ {\n  \"success\": true,\n  \"message\": \"Votre demande a Ã©tÃ© prise en compte. Vous serez recontactÃ© dans 24 Ã  48 heures.\",\n  \"timestamp\": $json.dateReception\n} }}",
        "options": {
          "responseCode": 200
        }
      },
      "id": "respond-node",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [900, 300]
    }
  ],
  "connections": {
    "Webhook - RÃ©ception formulaire": {
      "main": [
        [
          {
            "node": "Code - Validation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Validation": {
      "main": [
        [
          {
            "node": "Email - Confirmation utilisateur",
            "type": "main",
            "index": 0
          },
          {
            "node": "Email - Notification Ã©quipe",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email - Confirmation utilisateur": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email - Notification Ã©quipe": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2026-01-06T00:00:00.000Z",
      "updatedAt": "2026-01-06T00:00:00.000Z",
      "id": "leads-tag",
      "name": "leads"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2026-01-06T00:00:00.000Z",
  "versionId": "1"
}

